<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">  
    <!-- 移动端设置viewport  -->
    <meta name="viewport" content="width=device-width,  user-scalable=no, initial-scale=1.0">
    <title>手机京东zepto</title>
    <!-- 引入公共样式 -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/index.css">
    <!-- 引入zepto.js文件 -->
    <script src="zepto/zepto.min.js"></script>
    <!-- 引入支持和jq类似的选择器 -->
    <script src="zepto/selector.js"></script>
    <!-- 引入支持animate的模块 -->
    <script src="zepto/fx.js"></script>
    <!-- 引入支持touch的模块 -->
    <script src="zepto/touch.js"></script>

</head>
<body>
    <div class="jd_layout">
        <!-- 搜索块 -->
        <div class="jd_search">
            <a href="javascript:;" class="jd_logo"></a>
            <form action="" class="jd_searchBox">
                <input type="text" placeholder="请输入商品名称">
            </form>
            <a href="javascript:;" class="jd_login">登录</a>
        </div>
        <!-- 轮播图 -->
        <div class="jd_banner">
            <!-- 图片 -->
            <ul class="jd_bannerImg">
                <li>
                    <a href="javascript:;">
                        <img src="./uploads/l1.jpg" alt="">
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./uploads/l2.jpg" alt="">
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./uploads/l3.jpg" alt="">
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./uploads/l4.jpg" alt="">
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./uploads/l5.jpg" alt="">
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./uploads/l6.jpg" alt="">
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./uploads/l7.jpg" alt="">
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./uploads/l8.jpg" alt="">
                    </a>
                </li>
            </ul>
            <!-- 点标记 -->
            <ul class="jd_bannerIndicator">
                <li class="active"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </div>
        <!-- 导航块 -->
        <div class="jd_nav clearfix" >
            <ul>
                <li>
                    <a href="javascript:;">
                        <img src="./images/nav_1.png" alt="">
                        <p>商品分类</p>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./images/nav_2.png" alt="">
                        <p>商品分类</p>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./images/nav_3.png" alt="">
                        <p>商品分类</p>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./images/nav_4.png" alt="">
                        <p>商品分类</p>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./images/nav_5.png" alt="">
                        <p>商品分类</p>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./images/nav_6.png" alt="">
                        <p>商品分类</p>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./images/nav_7.png" alt="">
                        <p>商品分类</p>
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <img src="./images/nav_8.png" alt="">
                        <p>商品分类</p>
                    </a>
                </li>
            </ul>
        </div>
        <!-- 产品块 -->
        <div class="jd_product">
            <!-- 秒杀产品块 因为秒杀和别的块具体不一样，所以用标记jd_sk-->
            <div class="jd_productBox jd_sk clearfix">
                <div class="jd_pTip">
                    <div class="jd_left f_left">
                        <span class="jd_sk_icon f_left m_left10"></span>
                        <span class="jd_sk_text f_left m_left10">掌上秒杀</span>
                        <div class="jd_sk_time f_left m_left10">
                            <span>0</span>
                            <span>0</span>
                            <span>:</span>
                            <span>0</span>
                            <span>0</span>
                            <span>:</span>
                            <span>0</span>
                            <span>0</span>
                        </div>
                    </div>
                    <div class="jd_right f_right m_right10">
                        更多秒杀...
                    </div>
                </div>
                <div class="jd_pContent">
                    <ul>
                        <li>
                            <a href="javascript:;">
                                <img src="uploads/detail01.jpg" alt="">
                            </a>
                            <p>&yen;10.00</p>
                            <p>&yen;20.00</p>
                        </li>
                        <li>
                            <a href="javascript:;">
                                <img src="uploads/detail01.jpg" alt="">
                            </a>
                            <p>&yen;10.00</p>
                            <p>&yen;20.00</p>
                        </li>
                        <li>
                            <a href="javascript:;">
                                <img src="uploads/detail01.jpg" alt="">
                            </a>
                            <p>&yen;10.00</p>
                            <p>&yen;20.00</p>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- 京东超市产品块 -->
            <div class="jd_productBox">
                <div class="jd_pTip">
                    <h3>京东超市</h3>
                </div>
                <div class="jd_pContent clearfix"> <!--这里清除浮动，可以给高度，背景又是白色，可以改变底端对不齐的现象-->
                    <a href="javascript:;" class="a_50 f_left">
                        <img src="uploads/cp1.jpg" alt="">
                    </a>
                    <a href="javascript:;" class="a_50 f_left b_left b_bottom">
                        <img src="uploads/cp2.jpg"" alt="">
                    </a>
                    <a href="javascript:;" class="a_50 f_left b_left">
                        <img src="uploads/cp3.jpg"" alt="">
                    </a>
                </div>
            </div>
            <!-- 京东超市产品块2 -->
            <div class="jd_productBox">
                <div class="jd_pTip">
                    <h3>京东超市</h3>
                </div>
                <div class="jd_pContent clearfix"> <!--这里清除浮动，可以给高度，背景又是白色，可以改变底端对不齐的现象-->
                    <a href="javascript:;" class="a_50 f_right">
                        <img src="uploads/cp4.jpg" alt="">
                    </a>
                    <a href="javascript:;" class="a_50 f_left b_left b_bottom">
                        <img src="uploads/cp5.jpg"" alt="">
                    </a>
                    <a href="javascript:;" class="a_50 f_left b_left">
                        <img src="uploads/cp6.jpg"" alt="">
                    </a>
                </div>
            </div>
        </div>
    </div>

<script>
    /*使用zepto实现轮播图*/
    $(function() {
        var banner = $(".jd_banner");
        var bannerWidth = banner.width();
        var imgBox = banner.find("ul:first-of-type");
        var indicators = banner.find("ul:eq(1)").find("li");
        var first = imgBox.find("li:first-of-type");
        var last = imgBox.find("li:last-of-type");
        imgBox.append(first.clone());
        last.clone().insertBefore(first);

        var lis = imgBox.find("li");
        var count = lis.length;
        imgBox.width(count*bannerWidth);
        lis.each(function(index,value){
            $(lis[index]).width(bannerWidth);
        });
        //jq比较智能，一般不用加单位，不加单位是数值，加了反而成字符串
        imgBox.css("left",-bannerWidth);

        var index = 1;

        //封装轮播的动画效果
        /*在zepto中直接使用animate函数来实现;不用再监听，传入四个参数：
            * 1.需要添加动画效果的样式--对象
            * 2.动画的耗时
            * 3.动画的速度函数 animation-timing-function
            * 4.当前动画执行完毕之后的回调*/
        var imgAnimate = function() {
            imgBox.animate(
                {"left":-index*bannerWidth},  //开启过渡
                200,
                "ease-in-out",
                function(){
                    if(index==count-1) {
                        index = 1; //瞬间偏移到索引1，清除过渡效果
                        imgBox.css("left",-index*bannerWidth);
                    } else if(index == 0) {
                        index = count-2;
                        imgBox.css("left",-index*bannerWidth);
                    }
                    // 设置点标记
                    indicators.removeClass("active").eq(index-1).addClass("active");
                }
            )
        }
        //开启定时器，轮播
        var timerId = setInterval(function(){
            index++;
            imgAnimate();  //在上面封装动画
        },1500);
        
        //添加滑动事件--手动轮播
         imgBox.on("swipeLeft",function(){
             clearInterval(timerId);
             index++;
             imgAnimate();
         });
         imgBox.on("swipeRight",function() {
            clearInterval(timerId);
            index--;
            imgAnimate();
         });

    });
</script>
</body>
</html>